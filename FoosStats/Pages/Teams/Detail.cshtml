@page "{teamID:Guid}"
@model FoosStats.Pages.Teams.DetailModel
@{
    ViewData["Title"] = "Detail";
}

<h1>Team Details</h1>

<canvas id="line-chart" width="800" height="450"></canvas>

<div>
    <h3 class="text-center">Team's Games</h3>
    <table class="table">
        <thead>
            <tr class="font-weight-bold">
                <td>Game Number</td>
                <td>Game Time</td>
                <td>Blue Defense</td>
                <td>Blue Offense</td>
                <td>Blue Score</td>
                <td>Red Score</td>
                <td>Red Offense</td>
                <td>Red Defense</td>
            </tr>
        </thead>
        <tbody>
            @{ var count = Model.labels.Count-1;}
            @foreach (var game in Model.games)
            {
                <tr>
                    <td>@count</td>
                    <td>@game.GameTime</td>
                    <td><a href="../../Players/Detail/@game.BlueDefense">@game.BlueDefenseName</a></td>
                    <td><a href="../../Players/Detail/@game.BlueOffense">@game.BlueOffenseName</a></td>
                    <td>@game.BlueScore</td>
                    <td>@game.RedScore</td>
                    <td><a href="../../Players/Detail/@game.RedOffense">@game.RedOffenseName</a></td>
                    <td><a href="../../Players/Detail/@game.RedDefense">@game.RedDefenseName</a></td>
                </tr>
                count -= 1;
            }
        </tbody>
    </table>
</div>

<script>
    var labels = JSON.parse('@Html.Raw(Json.Serialize(@Model.labels))')
    var historical = JSON.parse('@Html.Raw(Json.Serialize(@Model.historicalElo))')
    new Chart(document.getElementById("line-chart"), {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                data: historical,
                label: "Score",
                borderColor: "#3e95cd",
                fill: false
            }
            ]
        },
        options: {
            title: {
                display: true,
                text: 'Elo Score Over Time'
            },
            scales: {
              xAxes: [{
                display: true,
                scaleLabel: {
                  display: true,
                  labelString: 'Game'
                }
              }],
              yAxes: [{
                display: true,
                scaleLabel: {
                  display: true,
                  labelString: 'Elo Score'
                }
              }]
            }
        }
    });
</script>
