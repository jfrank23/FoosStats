@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}


<div class="text-center">
    <h1 class="display-4">Welcome to FoosStats</h1>
</div>
<div style="margin-bottom:10px">
    <canvas id="RedVsBlue-chart"></canvas>
</div>

<hr />

<h4 class="text-center">Leader Board</h4>
<div class="card-deck" style="margin-bottom:10px">
    
    <div class="card">
        <h5 class="card-title text-center">Win Percentage</h5>
        @{ var count = 1;}
        @foreach (var player in Model.top5PlayerWinPct)
        {
            <ol><text class="font-weight-bold">@count. @player.FirstName @player.LastName</text> : @(((float)player.GamesWon / player.GamesPlayed * 100).ToString("F02"))%</ol>
            count += 1;
        }
    </div>
    <div class="card">
        <h5 class="card-title text-center">Average Goals For Per Game</h5>
        @{count = 1;}
        @foreach (var player in Model.top5PlayerGoalsFor)
        {
            <ol><text class="font-weight-bold">@count. @player.FirstName @player.LastName</text> : @(((float)player.GoalsFor / player.GamesPlayed).ToString("F02"))</ol>
            count += 1;
        }
    </div>
    <div class="card">
        <h5 class="card-title text-center">Average Goals Against Per Game</h5>
        @{count = 1;}
        @foreach (var player in Model.top5PlayerGoalsAgainst)
        {
            <ol><text class="font-weight-bold">@count. @player.FirstName @player.LastName</text> : @(((float)player.GoalsAgainst / player.GamesPlayed).ToString("F02"))</ol>
            count += 1;
        }
    </div>
</div>
<hr />
<div>
    <h4 class="text-center">Today's Games</h4>
    <table class="table">
        <thead>
            <tr class="font-weight-bold">
                <td>Game</td>
                <td>Blue Defense</td>
                <td>Blue Offense</td>
                <td>Blue Score</td>
                <td>Red Score</td>
                <td>Red Offense</td>
                <td>Red Defense</td>
            </tr>
        </thead>
        <tbody>
            @foreach (var game in Model.todaysGames)
            {
                <tr>
                    <td>@game.GameTime</td>
                    <td><a href="../../Players/Detail/@game.BlueDefense">@game.BlueDefenseName</a></td>
                    <td><a href="../../Players/Detail/@game.BlueOffense">@game.BlueOffenseName</a></td>
                    <td>@game.BlueScore</td>
                    <td>@game.RedScore</td>
                    <td><a href="../../Players/Detail/@game.RedOffense">@game.RedOffenseName</a></td>
                    <td><a href="../../Players/Detail/@game.RedDefense">@game.RedDefenseName</a></td>
                </tr>
            }
        </tbody>
    </table>
</div>


<script>
        new Chart(document.getElementById("RedVsBlue-chart"), {
            type: 'doughnut',
            data: {
                labels: ["Red", "Blue"],
                datasets: [{
                    label: "Win Percentage Per Side",
                    backgroundColor: ["#FF0000", "#0C00FF"],
                    data: [@Model.RedWinPct, @Model.BlueWinPct]
                }]
            },
            options: {
                title: {
                    display: true,
                    text: 'Win Percentage Per Side'
                }
            }
        });
</script>